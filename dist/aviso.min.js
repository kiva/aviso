/**
 * aviso.js - v0.1.4 
 * Copyright (c) 2013 Kiva Microfunds
 * 
 * Licensed under the MIT license.
 * https://github.com/kiva/backbone.siren/blob/master/license.txt
 */
!function(a,b){"use strict";function c(b,c){var f,g;return"object"!=typeof b||b instanceof jQuery||a.isArray(b)||b.message?"string"==typeof c&&(c={type:c}):c=b,f=e(c),g=new d(f),b&&g.show(b,f),g}function d(b){if(this.$el=a(b.el),this.$close=a("."+b.closeClass,this.$el).on("click.aviso",a.proxy(f,this)),this.$content=a("."+b.contentClass,this.$el),!this.$el||!this.$close||!this.$content)throw"Aviso Error: Missing required markup";a("body").append(this.$el)}function e(b){return a.extend({},c.defaults,b)}function f(a){a.preventDefault(),this.close()}c._messages={},c.defaults={validTypes:["info","warning","error"],el:'<div class="avisoWrapper"><div class="avisoContainer"><div class="avisoClose">x</div><div class="avisoContent"></div></div></div>',elClass:"avisoWrapper",closeClass:"avisoClose",contentClass:"avisoContent",containerClass:"avisoContainer",scrollOnShow:!1},d.prototype={slideDown:function(){return this.$el.css("opacity",1).slideDown().promise()},slideUp:function(){return this.$el.css("opacity",.3).slideUp().promise()},renderMessage:function(b,c){var d;return d=a.inArray(c.type,c.validTypes)<0?c.validTypes[0]:c.type,this.setMessageType(d,c),'<div class="avisoMsg avisoMsg-'+d+'"><div class="avisoMsgIcon"></div>'+b+"</div>"},setMessageType:function(b,c){var d=c.validTypes;(!this.messageType||a.inArray(b,d)>a.inArray(this.messageType,d))&&(this.messageType=b)},add:function(b,c){var d;return"object"==typeof b?(d=a.extend({},c,b.options),b=b.message):d=c,this.renderMessage(b,d)},_show:function(b,d){var e,f=this;b instanceof jQuery?e=b:a.isArray(b)?(e=a("<div />"),a.each(b,function(a,b){e.append(f.add(b,d))}),e=e.html()):("string"==typeof b||"object"==typeof b)&&(e=a(this.add(b,d))),this.$el.addClass(d.elClass+"-"+this.messageType),this.$content.append(e),c._messages["default"]=this,d.scrollOnShow&&a("html, body").animate({scrollTop:0}),this.slideDown()},show:function(a,b){var d=this,e=c._messages["default"];e?e.close().done(function(){d._show(a,b)}):this._show(a,b)},close:function(){var a=this;return this.slideUp().done(function(){a.$el.remove(),c._messages["default"]=null})}},b.aviso=c}(jQuery,this);