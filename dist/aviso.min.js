/**
 * aviso.js - v0.1.1 
 * Copyright (c) 2013 Kiva Microfunds
 * 
 * Licensed under the MIT license.
 * https://github.com/kiva/backbone.siren/blob/master/license.txt
 */
(function(s,e){"use strict";function t(e,t){var n,a;return"object"!=typeof e||e instanceof jQuery||s.isArray(e)||e.message?"string"==typeof t&&(t={type:t}):t=e,n=o(t),a=new i(n),e&&a.show(e,n),a}function i(e){if(this.$el=s(e.el),this.$close=s(e.closeClass,this.$el).on("click.aviso",s.proxy(a,this)),this.$content=s(e.contentClass,this.$el),!this.$el||!this.$close||!this.$content)throw"Aviso Error: Missing required markup";s("body").append(this.$el)}function o(e){return s.extend({},t.defaults,e)}function n(s){return'<div class="avisoMsg">'+s+"</div>"}function a(s){s.preventDefault(),this.close()}t._messages={},t.defaults={validTypes:["info","warning","error"],el:'<div class="avisoWrapper"><div class="avisoContainer"><div class="avisoClose">x</div><div class="avisoContent"></div></div></div>',elClass:".avisoWrapper",closeClass:".avisoClose",contentClass:".avisoContent",containerClass:".avisoContainer"},i.prototype={slideDown:function(){return this.$el.css("opacity",1).slideDown().promise()},slideUp:function(){return this.$el.css("opacity",.3).slideUp("slow").promise()},add:function(e,t){var i;return"object"==typeof e?(i=s.extend({},t,e.options),e=e.message):i=t,n(e,i)},_show:function(e,i){var o,n=this;e instanceof jQuery?o=e:s.isArray(e)?(o=s("<div />"),s.each(e,function(s,e){o.append(n.add(e,i))}),o=o.html()):("string"==typeof e||"object"==typeof e)&&(o=s(this.add(e,i))),this.$content.append(o),t._messages.one=this,s("html, body").animate({scrollTop:0}),this.slideDown()},show:function(s,e){var i=this,o=t._messages.one;o?o.close().done(function(){i._show(s,e)}):this._show(s,e)},close:function(){var s=this;return this.slideUp().done(function(){s.$el.remove(),t._messages.one=null})}},e.aviso=t})(jQuery,this);