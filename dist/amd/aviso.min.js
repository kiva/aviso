/**
 * aviso.js - v0.1.10 
 * Copyright (c) 2015 Kiva Microfunds
 * 
 * Licensed under the MIT license.
 * https://github.com/kiva/aviso/blob/master/license.txt
 */
define(["jquery"],function(a){"use strict";function b(b,e){var f,g;return"object"!=typeof b||b instanceof jQuery||a.isArray(b)||b.message?"string"==typeof e&&(e={type:e}):e=b,f=d(e),g=new c(f),b&&(g.show(b,f),f.autoClose&&setTimeout(function(){g.close()},f.setTimeout)),g}function c(b){if(this.$el=a(b.el),this.$close=a("."+b.closeClass,this.$el).on("click.aviso",a.proxy(e,this)),this.$content=a("."+b.contentClass,this.$el),!this.$el||!this.$close||!this.$content)throw"Aviso Error: Missing required markup";a("body").append(this.$el)}function d(c){return a.extend({},b.defaults,c)}function e(a){a.preventDefault(),this.close()}return b._messages={},b.defaults={validTypes:["info","warning","error"],el:'<div class="avisoWrapper"><div class="avisoContainer"><div class="avisoClose">x</div><div class="avisoContent"></div></div></div>',elClass:"avisoWrapper",closeClass:"avisoClose",contentClass:"avisoContent",containerClass:"avisoContainer",scrollOnShow:!1,setTimeout:2500,autoClose:null},c.prototype={slideDown:function(){return this.$el.css("opacity",1).slideDown().promise()},slideUp:function(){return this.$el.css("opacity",.3).slideUp().promise()},renderMessage:function(b,c){var d;return d=a.inArray(c.type,c.validTypes)<0?c.validTypes[0]:c.type,this.setMessageType(d,c),'<div class="avisoMsg avisoMsg-'+d+'"><div class="avisoMsgIcon"></div>'+b+"</div>"},renderTemplate:function(b,c){var d;return d=a.inArray(c.type,c.validTypes)<0?c.validTypes[0]:c.type,this.setMessageType(d,c),c.messagingTemplate({message:b,type:d})},setMessageType:function(b,c){var d=c.validTypes;(!this.messageType||a.inArray(b,d)>a.inArray(this.messageType,d))&&(this.messageType=b)},add:function(b,c){var d;return"object"==typeof b?(d=a.extend({},c,b.options),b=b.message):d=c,c.messagingTemplate?this.renderTemplate(b,d):this.renderMessage(b,d)},_show:function(c,d){var e,f=this;c instanceof jQuery?e=c:a.isArray(c)?(e=a("<div />"),a.each(c,function(a,b){e.append(f.add(b,d))}),e=e.html()):("string"==typeof c||"object"==typeof c)&&(e=a(this.add(c,d))),this.$el.addClass(d.elClass+"-"+this.messageType),this.$content.append(e),b._messages["default"]=this,d.scrollOnShow&&a("html, body").animate({scrollTop:0}),this.slideDown()},show:function(a,c){var d=this,e=b._messages["default"];e?e.close().done(function(){d._show(a,c)}):this._show(a,c)},close:function(){var a=this;return this.slideUp().done(function(){a.$el.remove(),b._messages["default"]=null})}},b});